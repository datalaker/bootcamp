"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[38642],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(a),k=r,m=c["".concat(s,".").concat(k)]||c[k]||h[k]||l;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},45646:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={},o="Lab: Data Streaming Pipeline with Kafka for livetolldata",i={unversionedId:"processing/lab-kafka-toll-analysis/README",id:"processing/lab-kafka-toll-analysis/README",title:"Lab: Data Streaming Pipeline with Kafka for livetolldata",description:"Objective",source:"@site/docs/03-processing/lab-kafka-toll-analysis/README.md",sourceDirName:"03-processing/lab-kafka-toll-analysis",slug:"/processing/lab-kafka-toll-analysis/",permalink:"/docs/processing/lab-kafka-toll-analysis/",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681794058,formattedLastUpdatedAt:"Apr 18, 2023",frontMatter:{},sidebar:"docs",previous:{title:"Lab: Stock Market Kafka Real Time",permalink:"/docs/processing/lab-kafka-stock-market/"},next:{title:"Project: Building an event-driven IKEA app with Kafka",permalink:"/docs/processing/project-kafka-ikea/"}},s={},p=[{value:"Objective",id:"objective",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Prepare the lab environment",id:"prepare-the-lab-environment",level:2},{value:"Assignment",id:"assignment",level:2},{value:"Task 2.1 - Start Zookeeper",id:"task-21---start-zookeeper",level:3},{value:"Task 2.2 - Start Kafka server",id:"task-22---start-kafka-server",level:3},{value:"Task 2.3 - Create a topic named\xa0<code>toll</code>",id:"task-23---create-a-topic-namedtoll",level:3},{value:"Task 2.4 - Configure the Toll Traffic Simulator",id:"task-24---configure-the-toll-traffic-simulator",level:3},{value:"Task 2.5 - Run the Toll Traffic Simulator",id:"task-25---run-the-toll-traffic-simulator",level:3},{value:"Task 2.6 - Configure\xa0the Streaming Data Reader",id:"task-26---configurethe-streaming-data-reader",level:3},{value:"Task 2.7 - Run\xa0the Streaming Data Reader",id:"task-27---runthe-streaming-data-reader",level:3},{value:"Task 2.8 - Health check of the streaming data pipeline.",id:"task-28---health-check-of-the-streaming-data-pipeline",level:3},{value:"Files",id:"files",level:2},{value:"Notebook",id:"notebook",level:2}],d={toc:p};function h(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lab-data-streaming-pipeline-with-kafka-for-livetolldata"},"Lab: Data Streaming Pipeline with Kafka for livetolldata"),(0,r.kt)("h2",{id:"objective"},"Objective"),(0,r.kt)("p",null,"In this lab, we will first create a toll database in MySQL, then create a table schema. We will then start the Kafka server and then stream toll data events using Kafka producer. On the other side, we will receive the streaming events using Kafka consumer and write into MySQL database, into the table that we created."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"You are a data engineer at a data analytics consulting company. You have been assigned to a project that aims to de-congest the national highways by analyzing the road traffic data from different toll plazas. As a vehicle passes a toll plaza, the vehicle\u2019s data like ",(0,r.kt)("inlineCode",{parentName:"p"},"vehicle_id"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"vehicle_type"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"toll_plaza_id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"timestamp")," are streamed to Kafka. Your job is to create a data pipe line that collects the streaming data and loads it into a database."),(0,r.kt)("p",null,"In this assignment you will create a streaming data pipe by performing these steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Start a MySQL Database server."),(0,r.kt)("li",{parentName:"ul"},"Create a table to hold the toll data."),(0,r.kt)("li",{parentName:"ul"},"Start the Kafka server."),(0,r.kt)("li",{parentName:"ul"},"Install the Kafka python driver."),(0,r.kt)("li",{parentName:"ul"},"Install the MySQL python driver."),(0,r.kt)("li",{parentName:"ul"},"Create a topic named toll in kafka."),(0,r.kt)("li",{parentName:"ul"},"Download streaming data generator program."),(0,r.kt)("li",{parentName:"ul"},"Customize the generator program to steam to toll topic."),(0,r.kt)("li",{parentName:"ul"},"Download and customise streaming data consumer."),(0,r.kt)("li",{parentName:"ul"},"Customize the consumer program to write into a MySQL database table."),(0,r.kt)("li",{parentName:"ul"},"Verify that streamed data is being collected in the database table.")),(0,r.kt)("h2",{id:"prepare-the-lab-environment"},"Prepare the lab environment"),(0,r.kt)("p",null,"Before you start the assignment, complete the following steps to set up the lab:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# Download Kafka\nwget https://archive.apache.org/dist/kafka/2.8.0/kafka_2.12-2.8.0.tgz\n\n# Extract Kafka\ntar -xzf kafka_2.12-2.8.0.tgz\n\n# Start MySQL server\nstart_mysql\n\n# Connect to the mysql server\nmysql --host=<hostname> --port=3306  --user=<username> --password\n\n# Create a database named\xa0`tolldata`\n# At the 'mysql>' prompt, run the command below to create the database.\ncreate database tolldata;\n\n# Create a table named\xa0`livetolldata`\xa0with the schema to store the data generated by the traffic simulator\nuse tolldata;\ncreate table livetolldata(timestamp datetime,vehicle_id int,vehicle_type char(15),toll_plaza_id smallint);\n\n# Disconnect from MySQL server\nexit\n\n# Install the python module\xa0`kafka-python`\xa0using the pip command\npip install kafka-python\n\n# Install the python module\xa0`mysql-connector-python`\xa0using the pip command\npip install mysql-connector-python \n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"livetolldata")," is the table where you would store all the streamed data that comes from kafka. Each row is a record of when a vehicle has passed through a certain toll plaza along with its type and anonymized id."),(0,r.kt)("h2",{id:"assignment"},"Assignment"),(0,r.kt)("h3",{id:"task-21---start-zookeeper"},"Task 2.1 - Start Zookeeper"),(0,r.kt)("p",null,"Start zookeeper server."),(0,r.kt)("p",null,"Take a screenshot of the command you run."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"start_zookeeper.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-22---start-kafka-server"},"Task 2.2 - Start Kafka server"),(0,r.kt)("p",null,"Start Kafka server"),(0,r.kt)("p",null,"Take a screenshot of the command you run."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"start_kafka.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-23---create-a-topic-namedtoll"},"Task 2.3 - Create a topic named\xa0",(0,r.kt)("inlineCode",{parentName:"h3"},"toll")),(0,r.kt)("p",null,"Create a Kakfa topic named\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"toll")),(0,r.kt)("p",null,"Take a screenshot of the command you run."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"create_toll_topic.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-24---configure-the-toll-traffic-simulator"},"Task 2.4 - Configure the Toll Traffic Simulator"),(0,r.kt)("p",null,"Open the\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"toll_traffic_generator.py"),"\xa0and set the topic to\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"toll"),"."),(0,r.kt)("p",null,"Take a screenshot of the task code with the topic clearly visible."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"configure_simulator.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-25---run-the-toll-traffic-simulator"},"Task 2.5 - Run the Toll Traffic Simulator"),(0,r.kt)("p",null,"Run the\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"toll_traffic_generator.py"),"."),(0,r.kt)("p",null,"Take a screenshot of the output of the simulator."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"simulator_output.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-26---configurethe-streaming-data-reader"},"Task 2.6 - Configure\xa0the Streaming Data Reader"),(0,r.kt)("p",null,"Open the\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"streaming_data_reader.py"),"\xa0and modify the following details so that the program can connect to your mysql server."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"TOPIC")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"DATABASE")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"USERNAME")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"PASSWORD"))),(0,r.kt)("p",null,"Take a screenshot of the code you modified."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"streaming_reader_code.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-27---runthe-streaming-data-reader"},"Task 2.7 - Run\xa0the Streaming Data Reader"),(0,r.kt)("p",null,"Run the\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"streaming_data_reader.py")),(0,r.kt)("p",null,"Take a screenshot of the output of the streaming_data_reader.py."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"data_reader_output.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("h3",{id:"task-28---health-check-of-the-streaming-data-pipeline"},"Task 2.8 - Health check of the streaming data pipeline."),(0,r.kt)("p",null,"If you have done all the steps till here correctly, the streaming toll data would get stored in the table\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"livetolldata"),"."),(0,r.kt)("p",null,"List the top 10 rows in the table\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"livetolldata"),"."),(0,r.kt)("p",null,"Take a screenshot of the command and the output."),(0,r.kt)("p",null,"Name the screenshot\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"output_rows.jpg"),". (Images can be saved with either the .jpg or .png extension.)"),(0,r.kt)("p",null,"This concludes the assignment."),(0,r.kt)("h2",{id:"files"},"Files"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/sparsh-ai/recohut/tree/main/docs/03-processing/lab-kafka-toll-analysis"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white",alt:"Github"}))),(0,r.kt)("h2",{id:"notebook"},"Notebook"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://nbviewer.org/github/sparsh-ai/recohut/blob/main/docs/03-processing/lab-kafka-toll-analysis/main.ipynb"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/jupyter-notebook-informational?logo=jupyter",alt:"nbviewer"}))))}h.isMDXComponent=!0}}]);