"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[86295],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>b});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=d(r),b=a,h=p["".concat(s,".").concat(b)]||p[b]||c[b]||o;return r?n.createElement(h,l(l({ref:t},u),{},{components:r})):n.createElement(h,l({ref:t},u))}));function b(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var d=2;d<o;d++)l[d]=r[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},25627:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var n=r(87462),a=(r(67294),r(3905));const o={},l="db2",i={unversionedId:"storage/lab-db2-bookshop-petsale-data-ingestion/README",id:"storage/lab-db2-bookshop-petsale-data-ingestion/README",title:"db2",description:"db2 BookShop and PetSale Data Ingestion and Stored Procedure",source:"@site/docs/02-storage/lab-db2-bookshop-petsale-data-ingestion/README.md",sourceDirName:"02-storage/lab-db2-bookshop-petsale-data-ingestion",slug:"/storage/lab-db2-bookshop-petsale-data-ingestion/",permalink:"/docs/storage/lab-db2-bookshop-petsale-data-ingestion/",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681047270,formattedLastUpdatedAt:"Apr 9, 2023",frontMatter:{},sidebar:"docs",previous:{title:"Lab: Configuring and Securing Azure SQL Database",permalink:"/docs/storage/lab-azure-sql-securing-databases/"},next:{title:"Lab: DuckDB",permalink:"/docs/storage/lab-duckdb-analytics-bank-tpch-nyctaxi/"}},s={},d=[{value:"BookShop",id:"bookshop",level:2},{value:"Insert data in IBM db2",id:"insert-data-in-ibm-db2",level:3},{value:"PetSale",id:"petsale",level:2},{value:"Insert PetSale data into IBM db2",id:"insert-petsale-data-into-ibm-db2",level:3},{value:"Create Stored Procedure",id:"create-stored-procedure",level:3}],u={toc:d};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"db2"},"db2"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"db2 BookShop and PetSale Data Ingestion and Stored Procedure")),(0,a.kt)("h2",{id:"bookshop"},"BookShop"),(0,a.kt)("h3",{id:"insert-data-in-ibm-db2"},"Insert data in IBM db2"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/62965911/214214836-e0bdf10d-0c22-4d84-9016-5d830a532954.png",alt:null})),(0,a.kt)("h2",{id:"petsale"},"PetSale"),(0,a.kt)("h3",{id:"insert-petsale-data-into-ibm-db2"},"Insert PetSale data into IBM db2"),(0,a.kt)("p",null,"Same as above, but use ",(0,a.kt)("inlineCode",{parentName:"p"},"./PETSALE-CREATE-v2.sql")," script."),(0,a.kt)("h3",{id:"create-stored-procedure"},"Create Stored Procedure"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You will create a stored procedure routine named\xa0RETRIEVE_ALL."),(0,a.kt)("li",{parentName:"ul"},"This\xa0RETRIEVE_ALL\xa0routine will contain an SQL query to retrieve all the records from the PETSALE table, so you don't need to write the same query over and over again. You just call the stored procedure routine to execute the query everytime."),(0,a.kt)("li",{parentName:"ul"},"To create the stored procedure routine, copy the code below and paste it to the textbox of the\xa0Run SQL\xa0page. Click\xa0Run all.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"--#SET TERMINATOR @\nCREATE PROCEDURE RETRIEVE_ALL       -- Name of this stored procedure routine\n\nLANGUAGE SQL                        -- Language used in this routine \nREADS SQL DATA                      -- This routine will only read data from the table\n\nDYNAMIC RESULT SETS 1               -- Maximum possible number of result-sets to be returned to the caller query\n\nBEGIN \n\n    DECLARE C1 CURSOR               -- CURSOR C1 will handle the result-set by retrieving records row by row from the table\n    WITH RETURN FOR                 -- This routine will return retrieved records as a result-set to the caller query\n    \n    SELECT * FROM PETSALE;          -- Query to retrieve all the records from the table\n    \n    OPEN C1;                        -- Keeping the CURSOR C1 open so that result-set can be returned to the caller query\n\nEND\n@                                   -- Routine termination character\n")),(0,a.kt)("p",null,"To call the RETRIEVE_ALL routine, copy the code below in a new blank script and paste it to the textbox of the Run SQL page. Click Run all. You will have all the records retrieved from the PETSALE table."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"CALL RETRIEVE_ALL;      -- Caller query\n")),(0,a.kt)("p",null,"If you wish to drop the stored procedure routine RETRIEVE_ALL, copy the code below and paste it to the textbox of the Run SQL page. Click Run all."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"DROP PROCEDURE RETRIEVE_ALL;\n\nCALL RETRIEVE_ALL;\n")))}c.isMDXComponent=!0}}]);