"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[22817],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=n.createContext({}),s=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(a),h=i,m=d["".concat(c,".").concat(h)]||d[h]||u[h]||r;return a?n.createElement(m,o(o({ref:t},p),{},{components:a})):n.createElement(m,o({ref:t},p))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},47332:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(87462),i=(a(67294),a(3905));const r={},o="Lab: Streaming Analytics and Dashboards",l={unversionedId:"visualization/looker-studio/lab-gcp-streaming-analytics",id:"visualization/looker-studio/lab-gcp-streaming-analytics",title:"Lab: Streaming Analytics and Dashboards",description:"Objective",source:"@site/docs/08-visualization/looker-studio/lab-gcp-streaming-analytics.md",sourceDirName:"08-visualization/looker-studio",slug:"/visualization/looker-studio/lab-gcp-streaming-analytics",permalink:"/docs/visualization/looker-studio/lab-gcp-streaming-analytics",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681732641,formattedLastUpdatedAt:"Apr 17, 2023",frontMatter:{},sidebar:"docs",previous:{title:"Flask",permalink:"/docs/visualization/flask/"},next:{title:"Apache Superset - Preset",permalink:"/docs/visualization/preset/"}},c={},s=[{value:"Objective",id:"objective",level:2},{value:"Creating a data source in Data Studio",id:"creating-a-data-source-in-data-studio",level:2},{value:"Creating a bar chart using a calculated field",id:"creating-a-bar-chart-using-a-calculated-field",level:2},{value:"Creating a chart using a custom query",id:"creating-a-chart-using-a-custom-query",level:2}],p={toc:s};function u(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"lab-streaming-analytics-and-dashboards"},"Lab: Streaming Analytics and Dashboards"),(0,i.kt)("h2",{id:"objective"},"Objective"),(0,i.kt)("p",null,"Streaming Data Processing - Streaming Analytics and Dashboards"),(0,i.kt)("p",null,"In this lab, you will perform the following tasks:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Connect to a BigQuery data source"),(0,i.kt)("li",{parentName:"ul"},"Create reports and charts to visualize BigQuery data")),(0,i.kt)("h2",{id:"creating-a-data-source-in-data-studio"},"Creating a data source in Data Studio"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The Google Data Studio User Interface is accessed from outside of the Google Cloud environment. Open a new browser tab preferably in an incognito window. Navigate to: ",(0,i.kt)("a",{parentName:"p",href:"https://datastudio.google.com"},"https://datastudio.google.com"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"On the Reports page, in the Start with a Template section, click the Blank Report template. Enter basic info like country and company and check 'No' to all email, then click continue.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Again click on Reports page, in the Start with a Template section, click the Blank Report template. This time it will take you to a new page and begin an Untitled Report. The Add data to report panel will load from the bottom of the page.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Google Connectors section, select BigQuery. Click on Authorize.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Select My Projects. In the Project column, click your project name.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Dataset column, click demos.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Table column, click current_conditions.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Lastly click Add. Check Don't show me this again and click Add to report.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Once complete, a simple default tabular report appears. This confirms that you can see your BigQuery data in Data Studio."))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/62965911/214003328-2433ef72-8d15-4571-9864-d6d838e520ed.png",alt:null})),(0,i.kt)("h2",{id:"creating-a-bar-chart-using-a-calculated-field"},"Creating a bar chart using a calculated field"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Once you have added the current_conditions data source to the report, the next step is to create a visualization. Begin by creating a bar chart. The bar chart will display the total number of vehicles captured for each highway.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Delete the pre-populated tabular report. You can do this by simply selecting it and pressing delete.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Next, from the Add a chart menu select the first Bar chart.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Bar chart properties window, on the Data tab, notice the value for Data Source (current_conditions) and the default values for Dimension and Metric.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If Dimension is not set to highway, then change Dimension to highway. In the Dimension section, click the existing dimension and in the Dimension picker, select highway.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Metric section, click Add metric and add latitude.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Metric section, mouse over Record Count and click the (x) to remove it.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"To gain insight on vehicle volume you need to add a metric for each vehicle detected.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Metric section, click Add metric and add sensorId.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A count distinct for this column is automatically created. This metric set as a count distinct does not give you a true sense of traffic volume. Click the CTD text and on the popup window choose Count. Type the name vehicles in the name box. Click in the report space off the popup to close it. The change is saved automatically.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Metric section, mouse over latitude and click the (x) to remove it.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The Dimension should be set to highway and the Metric should be set to sensorId. Notice the chart below is sorted in descending order by default. The highway with the most vehicles is displayed first.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"To enhance the chart, change the bar labels. In the Bar chart properties window, click the STYLE tab.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the Bar chart section, check Show data labels.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The total number of vehicles is displayed above each bar in the chart."))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/62965911/214003324-3daef285-2a07-4f12-88c9-d024b6fbc8a6.png",alt:null})),(0,i.kt)("h2",{id:"creating-a-chart-using-a-custom-query"},"Creating a chart using a custom query"),(0,i.kt)("p",null,"You may find that it is easier to work with an existing query to produce the desired reports and visualizations in Data Studio. The Custom Query option lets you leverage BigQuery's full query capabilities such as joins, unions, and analytical functions."),(0,i.kt)("p",null,"Alternatively, you can leverage BigQuery's full query capabilities by creating a view. A view is a virtual table defined by a SQL query. You can query data in a view by adding the dataset containing the view as a data source."),(0,i.kt)("p",null,"When you specify a SQL query as your BigQuery data source, the results of the query are in table format, which becomes the field definition (schema) for your data source. When you use a custom query as a data source, Data Studio uses your SQL as an inner select statement for each generated query to BigQuery."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"From the\xa0Add a chart\xa0menu select the first\xa0Bar chart.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the\xa0Bar chart\xa0properties window, on the\xa0Data\xa0tab, notice the value for Data Source (current_conditions) and the default values for Dimension and Metric are the same as the previous chart. In the\xa0Data Source\xa0section, click the\xa0current_conditions\xa0data source. At the bottom of the pane choose\xa0Add data.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Under\xa0Google Connectors, select\xa0BigQuery.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Select\xa0CUSTOM QUERY\xa0in the first grouping.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For\xa0Billing Project, select your project.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Type the following in the\xa0Enter custom query\xa0window and replace the\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"<PROJECTID>"),"\xa0with your Project ID:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT max(speed) as maxspeed, min(speed) as minspeed,\navg(speed) as avgspeed, highway\nFROM `<PROJECTID>.demos.current_conditions`\ngroup by highway\n")),(0,i.kt)("p",null,"This query uses max/min/avg functions to give you the corresponding speed for each highway."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Click\xa0ADD.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"When prompted, click\xa0ADD TO REPORT."))),(0,i.kt)("p",null,"Note:\xa0Data Studio may be unable to determine the appropriate Dimension and Metrics for the chart. This requires you to adjust the graph options."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"In the\xa0Bar chart\xa0properties, on the\xa0Data\xa0tab, in the\xa0Metric\xa0section, click\xa0Record count."),(0,i.kt)("li",{parentName:"ol"},"In the\xa0Metric picker,\xa0select\xa0maxspeed."),(0,i.kt)("li",{parentName:"ol"},"In the\xa0Metric\xa0section, click\xa0Add metric."),(0,i.kt)("li",{parentName:"ol"},"In the\xa0Metric picker, select\xa0minspeed."),(0,i.kt)("li",{parentName:"ol"},"In the\xa0Metric\xa0section, click\xa0Add metric."),(0,i.kt)("li",{parentName:"ol"},"In the\xa0Metric picker, select\xa0avgspeed."),(0,i.kt)("li",{parentName:"ol"},"Remove the metric other than maxspeed, minspeed and avgspeed, if exist.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Your chart now displays the maximum speed, minimum speed, and average speed for each highway.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Notice each bar has a default color based on the order the metrics were added to the chart.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For readability, change the chart styles. In the\xa0Bar chart\xa0properties, click the\xa0Style\xa0tab.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In the\xa0Color By\xa0section, click on the boxes to select different colors."))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/62965911/214003318-7ce0ee63-dfd8-464b-8a0d-86b844ca59dd.png",alt:null})),(0,i.kt)("p",null,"Congratulations!"))}u.isMDXComponent=!0}}]);