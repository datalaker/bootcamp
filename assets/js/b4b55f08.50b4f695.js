"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[69816],{3905:(e,n,s)=>{s.d(n,{Zo:()=>m,kt:()=>d});var t=s(67294);function r(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function a(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function l(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?a(Object(s),!0).forEach((function(n){r(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}function i(e,n){if(null==e)return{};var s,t,r=function(e,n){if(null==e)return{};var s,t,r={},a=Object.keys(e);for(t=0;t<a.length;t++)s=a[t],n.indexOf(s)>=0||(r[s]=e[s]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)s=a[t],n.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var o=t.createContext({}),_=function(e){var n=t.useContext(o),s=n;return e&&(s="function"==typeof e?e(n):l(l({},n),e)),s},m=function(e){var n=_(e.components);return t.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var s=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),p=_(s),d=r,y=p["".concat(o,".").concat(d)]||p[d]||c[d]||a;return s?t.createElement(y,l(l({ref:n},m),{},{components:s})):t.createElement(y,l({ref:n},m))}));function d(e,n){var s=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=s.length,l=new Array(a);l[0]=p;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var _=2;_<a;_++)l[_]=s[_];return t.createElement.apply(null,l)}return t.createElement.apply(null,s)}p.displayName="MDXCreateElement"},59018:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>_});var t=s(87462),r=(s(67294),s(3905));const a={},l="Loop Analytics",i={unversionedId:"capstones/other/loop-analytics/README",id:"capstones/other/loop-analytics/README",title:"Loop Analytics",description:"Extracing data and loading it to Redshift, and a dbt project for transforming it.",source:"@site/docs/12-capstones/other/loop-analytics/README.md",sourceDirName:"12-capstones/other/loop-analytics",slug:"/capstones/other/loop-analytics/",permalink:"/docs/capstones/other/loop-analytics/",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681047270,formattedLastUpdatedAt:"Apr 9, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"notes",permalink:"/docs/capstones/other/fireflow/airflow/notes"},next:{title:"Patent Analytics Data Pipeline",permalink:"/docs/capstones/other/patent-analytics/"}},o={},_=[{value:"Structure",id:"structure",level:2},{value:"DBT",id:"dbt",level:3},{value:"(E)mpirical (R)oot ETL - ERetl",id:"empirical-root-etl---eretl",level:3},{value:"Additional Notes",id:"additional-notes",level:2},{value:"Dealing with customers that have multiple accounts",id:"dealing-with-customers-that-have-multiple-accounts",level:3},{value:"Solution",id:"solution",level:2},{value:"References",id:"references",level:2}],m={toc:_};function c(e){let{components:n,...s}=e;return(0,r.kt)("wrapper",(0,t.Z)({},m,s,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"loop-analytics"},"Loop Analytics"),(0,r.kt)("p",null,"Extracing data and loading it to Redshift, and a dbt project for transforming it."),(0,r.kt)("h2",{id:"structure"},"Structure"),(0,r.kt)("h3",{id:"dbt"},"DBT"),(0,r.kt)("h3",{id:"empirical-root-etl---eretl"},"(E)mpirical (R)oot ETL - ERetl"),(0,r.kt)("h2",{id:"additional-notes"},"Additional Notes"),(0,r.kt)("h3",{id:"dealing-with-customers-that-have-multiple-accounts"},"Dealing with customers that have multiple accounts"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Consolidate the accounts under 1 member_id using")," ",(0,r.kt)("inlineCode",{parentName:"p"},"dbt.data._duplicates.csv")),(0,r.kt)("p",null,"Under the loop-dbt/data/ directory exists a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"_duplicates.csv")," which is a hard coded table to identify customers who have more than one account. We use that to identify the preferred account by providing the preferred ",(0,r.kt)("inlineCode",{parentName:"p"},"member_id")),(0,r.kt)("p",null,"For each system where the customer has a duplicate record there should be an entry in the ",(0,r.kt)("inlineCode",{parentName:"p"},"_duplicates.csv")," table. Choosing the shared/primary member_id of the preferred record."),(0,r.kt)("p",null,"The ephemeral table ",(0,r.kt)("inlineCode",{parentName:"p"},"ephemeral.member_id_map.sql")," then uses that duplicates table to map users from any of the connected systems (e.g. hubspot, spotify, etc) to the ",(0,r.kt)("em",{parentName:"p"},"primary")," ",(0,r.kt)("inlineCode",{parentName:"p"},"member_id")),(0,r.kt)("p",null,"All the other tables should be using the member_id_map to connect a customer to the primary ",(0,r.kt)("inlineCode",{parentName:"p"},"member_id"),"."),(0,r.kt)("p",null,"In the case that a system does not have access to one of the system's ids like the hubspot.contact_id, but does have access the the email, one can get the primary member_id by looking up the md5(lower(trim(",(0,r.kt)("em",{parentName:"p"},"email"),"))) as the ",(0,r.kt)("inlineCode",{parentName:"p"},"email_key")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ephemeral.member_id_by_email")," mapping. "),(0,r.kt)("p",null,"for example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"select \n    member_id_by_email.member_id\n    , my_table.*\nfrom \n    my_table\n    left join {{ ref('member_id_by_email') }} as member_id_by_email \n        on md5(lower(trim(my_table.email_field_with_weird_name))) = member_id_by_email.email_key\n")),(0,r.kt)("h2",{id:"solution"},"Solution"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 [1.0K]  config\n\u2502   \u2514\u2500\u2500 [ 957]  config_example.yaml\n\u251c\u2500\u2500 [1.6K]  loop-analytics.md\n\u251c\u2500\u2500 [1.2M]  loop-dbt\n\u2502   \u251c\u2500\u2500 [ 14K]  analysis\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  LOOP-122_monthly_member_churn_agg.sql\n\u2502   \u2502   \u251c\u2500\u2500 [3.1K]  annual_churn_category.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 396]  email_capture_signups.sql\n\u2502   \u2502   \u251c\u2500\u2500 [1.6K]  fact_loop_old.sql\n\u2502   \u2502   \u251c\u2500\u2500 [1.8K]  pdp_prep_post_analysis.sql.ignore\n\u2502   \u2502   \u251c\u2500\u2500 [ 757]  product_as_first_page_view.sql\n\u2502   \u2502   \u251c\u2500\u2500 [3.4K]  q1_rebate.sql\n\u2502   \u2502   \u2514\u2500\u2500 [ 597]  snoo_duration.sql\n\u2502   \u251c\u2500\u2500 [588K]  data\n\u2502   \u2502   \u251c\u2500\u2500 [ 211]  _bundled_products.csv\n\u2502   \u2502   \u251c\u2500\u2500 [ 478]  _duplicate_emails.csv\n\u2502   \u2502   \u251c\u2500\u2500 [3.3K]  _duplicates.csv\n\u2502   \u2502   \u251c\u2500\u2500 [ 11K]  _line_item_sku_override.csv\n\u2502   \u2502   \u251c\u2500\u2500 [ 329]  _manual_products.csv\n\u2502   \u2502   \u251c\u2500\u2500 [8.4K]  _member_exceptions.csv\n\u2502   \u2502   \u251c\u2500\u2500 [3.5K]  _member_overrides.csv\n\u2502   \u2502   \u251c\u2500\u2500 [ 17K]  _transaction_sku_override.csv\n\u2502   \u2502   \u251c\u2500\u2500 [1.1K]  dim_channel.csv\n\u2502   \u2502   \u251c\u2500\u2500 [541K]  dim_date.csv.zip\n\u2502   \u2502   \u251c\u2500\u2500 [  56]  points.csv\n\u2502   \u2502   \u2514\u2500\u2500 [1.6K]  seeds.yml\n\u2502   \u251c\u2500\u2500 [ 733]  dbt_project.yml\n\u2502   \u251c\u2500\u2500 [2.3K]  macros\n\u2502   \u2502   \u251c\u2500\u2500 [ 404]  generate_schema_name.sql\n\u2502   \u2502   \u251c\u2500\u2500 [1.5K]  hacks.sql\n\u2502   \u2502   \u2514\u2500\u2500 [ 244]  utils.sql\n\u2502   \u251c\u2500\u2500 [621K]  models\n\u2502   \u2502   \u251c\u2500\u2500 [ 59K]  aggs\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 841]  abandoned_cart_mix.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.8K]  agg_member_waterfall.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.4K]  agg_registry.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  70]  bigcommerce_completed_orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [5.8K]  channel_performance_daily.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.4K]  checkout_view_loss.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.5K]  cohort_base.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 149]  discount_codes.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.5K]  klayvio_customer_data.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 16K]  kpis_by_day.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  36]  last_data_refresh.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 718]  loop_daily_targets.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [8.5K]  member_agg.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.1K]  member_attribution_agg.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 459]  member_sales_agg.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.6K]  mrr_by_customer_month_transpose.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.0K]  mrr_customer_reshape_henry.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.2K]  new_customer_by_day.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.1K]  order_attribution_base.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 522]  product_page_views.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 891]  product_view_loss_agg.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.3K]  products_with_more_than_five_payments.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.2K]  sku_agg.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.4K]  wide2long_member_histograms.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 55K]  dw\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [4.9K]  combined\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 687]  fact_line_item.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.1K]  fact_order.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 472]  fact_refund.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 653]  fact_refund_line_item.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 716]  fact_transaction.sql\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.1K]  sessioned_events_combined.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.7K]  customer_ids.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.3K]  dim_ad.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 970]  dim_campaign.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.0K]  dim_item.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 32K]  dim_members.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 501]  dim_membership.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.9K]  dim_product.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 421]  dim_subscriptions.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 991]  fact_ad_performance.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 863]  fact_daily_depreciation.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 684]  fact_daily_revenue.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 762]  fact_discounts.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.8K]  fact_loop.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 448]  fact_message_clicked.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 427]  fact_message_delivered.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 421]  fact_message_opened.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.2K]  order_ids_map.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 69K]  dw2\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 830]  customer_id_map.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 875]  deliveries.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 760]  discounts.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.3K]  inventory.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.3K]  line_items.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 745]  logistics.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.7K]  loops.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 298]  member_history.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 15K]  members.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [   0]  orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [6.7K]  payments.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.0K]  pickups.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.3K]  products.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [6.5K]  sessioned_events.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [9.1K]  site_activity.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [4.7K]  subscriptions.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [ 12K]  web_activity.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 31K]  ephemeral\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [5.7K]  _member_type_inputs.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  95]  dates.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [   0]  existing_subscription_to_charge.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 333]  loopshare_discount_hack.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.8K]  member_baskets_loop.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.6K]  member_baskets_platform.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 125]  member_id_by_email.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [3.1K]  member_id_map.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  66]  member_initial_baskets_loop.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  70]  member_initial_baskets_platform.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  66]  member_second_baskets_loop.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  69]  member_second_baskets_platform.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 499]  members_with_hacked_annual_membership.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.9K]  membership_orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 419]  non_refunded_line_items.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  80]  numbers.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 426]  recurring_subscription_invoice.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 13K]  shopify\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [5.8K]  _member_type_inputs_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.8K]  member_baskets_loop_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.6K]  member_baskets_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.8K]  member_id_map_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [  75]  member_initial_baskets_loop_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [  70]  member_initial_baskets_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [  75]  member_second_baskets_loop_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [  70]  member_second_baskets_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 514]  members_with_hacked_annual_membership_shopify.sql\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.1K]  membership_orders_shopify.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [ 516]  sku_avg_price.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 23K]  finance_reports\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 338]  bigcommerce_line_items.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 174]  bigcommerce_orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 14K]  bold_subscriptions.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [  33]  customers_id_map.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 315]  shopify_line_items.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 258]  shopify_orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 344]  stripe_charges.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.6K]  stripe_invoice_line_items.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [6.0K]  stripe_subscriptions.sql\n\u2502   \u2502   \u251c\u2500\u2500 [ 17K]  qb_views\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.2K]  customers.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 627]  filtered_order_lines.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 610]  non_subscription_line_items.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 649]  non_subscription_orders.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.3K]  products_vw.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [5.2K]  replatform\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.2K]  customers_rp.sql\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.7K]  non_subscription_line_items_rp.sql\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.2K]  non_subscription_orders_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.3K]  shipping_addresses.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [5.4K]  shopify\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 [ 350]  customers_shopify.sql\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 [2.1K]  non_subscription_line_items_shopify.sql\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 [1.3K]  non_subscription_orders_shopify.sql\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 [1005]  order_shipping_addresses.sql\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 [ 548]  shipping_addresses_shopify.sql\n\u2502   \u2502   \u251c\u2500\u2500 [1.2K]  report_tables\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.1K]  registry_buyer_recipients\n\u2502   \u2502   \u251c\u2500\u2500 [ 86K]  shopify_archived\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.8K]  agg_member_waterfall_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.5K]  cohort_base_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 33K]  dim_members_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 531]  dim_membership_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 447]  dim_product_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 259]  dim_subscriptions_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 871]  fact_daily_depreciation_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 700]  fact_daily_revenue_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [3.2K]  fact_loop_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 12K]  fact_web_activity_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.5K]  klaviyo_customer_data_shopify.sql.ignore\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 16K]  kpis_by_day_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [9.9K]  member_agg_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 475]  member_sales_agg_shopify.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [1.2K]  new_customers_by_day_shopify.sql\n\u2502   \u2502   \u251c\u2500\u2500 [271K]  single_platform\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.2K]  fact_line_item_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 913]  fact_line_item_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [3.0K]  fact_order_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [2.2K]  fact_order_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.2K]  fact_refund_line_item_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.1K]  fact_refund_line_items_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [ 968]  fact_refund_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [1.6K]  fact_refund_shopify.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [4.2K]  fact_transaction_rp.sql\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [3.9K]  fact_transaction_shopify.sql\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [250K]  sessioned_events_shopify.sql\n\u2502   \u2502   \u251c\u2500\u2500 [10.0K]  sources.yml\n\u2502   \u2502   \u2514\u2500\u2500 [ 237]  testing\n\u2502   \u2502       \u251c\u2500\u2500 [  84]  member_daily_change.sql\n\u2502   \u2502       \u2514\u2500\u2500 [  25]  member_day_before.sql\n\u2502   \u251c\u2500\u2500 [  96]  snapshots\n\u2502   \u2514\u2500\u2500 [  96]  tests\n\u251c\u2500\u2500 [1.9K]  requirements.txt\n\u251c\u2500\u2500 [104K]  schema\n\u2502   \u251c\u2500\u2500 [ 13K]  bigcommerce\n\u2502   \u2502   \u251c\u2500\u2500 [ 372]  brands.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 674]  categories.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 708]  customers.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.4K]  line_items.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [3.0K]  orders.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [3.1K]  products.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 511]  refunds.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 494]  shipments.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.3K]  shipping_addresses.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [ 940]  variants.yaml\n\u2502   \u251c\u2500\u2500 [5.2K]  bold\n\u2502   \u2502   \u251c\u2500\u2500 [ 973]  addresses.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 369]  customers.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 260]  labels.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.2K]  line_items.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 444]  shipping_lines.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 351]  subscription_summaries.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [1.4K]  subscriptions.yaml\n\u2502   \u251c\u2500\u2500 [ 12K]  dw\n\u2502   \u2502   \u251c\u2500\u2500 [3.7K]  cohort_data.sql\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  dim_member.sql\n\u2502   \u2502   \u251c\u2500\u2500 [5.3K]  kpis_by_day.sql\n\u2502   \u2502   \u2514\u2500\u2500 [ 486]  scheduled_item_stats.sql\n\u2502   \u251c\u2500\u2500 [2.3K]  dynamo\n\u2502   \u2502   \u251c\u2500\u2500 [ 305]  accounts_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 306]  accounts_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  65]  accounts_sequence_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  66]  accounts_sequence_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  89]  bold_subscription_notification_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  90]  bold_subscription_notification_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  64]  carts_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  66]  carts_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 124]  customer_migration_messages_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 125]  customer_migration_messages_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 116]  customer_migrations_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 117]  customer_migrations_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  68]  customers_dev.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  69]  customers_prod.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [  69]  registries_dev.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [  71]  registries_prod.yaml\n\u2502   \u251c\u2500\u2500 [7.9K]  googlesheets\n\u2502   \u2502   \u251c\u2500\u2500 [ 164]  fb_ad_key.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.9K]  inventory_reporting_base.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 558]  loop_daily_targets.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.0K]  loop_master.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1007]  nyc_loop_master.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.5K]  nyc_purchase_master.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [1.6K]  purchase_master.yaml\n\u2502   \u251c\u2500\u2500 [ 15K]  hubspot\n\u2502   \u2502   \u251c\u2500\u2500 [9.6K]  contacts.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [5.5K]  deals.yaml\n\u2502   \u251c\u2500\u2500 [ 642]  ip_api\n\u2502   \u2502   \u2514\u2500\u2500 [ 546]  ip_location.yaml\n\u2502   \u251c\u2500\u2500 [ 39K]  quickbase\n\u2502   \u2502   \u251c\u2500\u2500 [1.4K]  associate_asset_tag.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.3K]  associate_customer_address_to_order.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.2K]  associate_inventory_location.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.7K]  cancel_performed_delivery.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  cancel_performed_pickup.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.9K]  cancel_scheduled_pickup.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.1K]  create_regional_inventory_transfer.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 827]  customers.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  inventory.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.4K]  inventory_locations.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.5K]  order_lines.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.8K]  perform_delivery.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 937]  perform_local_inventory_transfer.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.4K]  perform_qa.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  pick_cancellation.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [3.1K]  pick_deliveries.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 795]  receive_asset.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.2K]  receive_inventory_transfer.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.0K]  schedule_delivery.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [2.6K]  schedule_pickup.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [1.8K]  scheduled_delivery_cancellation.yaml\n\u2502   \u2502   \u251c\u2500\u2500 [ 686]  scrap_asset.yaml\n\u2502   \u2502   \u2514\u2500\u2500 [ 753]  sell_asset.yaml\n\u2502   \u251c\u2500\u2500 [ 966]  reviewsio\n\u2502   \u2502   \u2514\u2500\u2500 [ 870]  merchant_reviews.yaml\n\u2502   \u2514\u2500\u2500 [7.6K]  shopify\n\u2502       \u251c\u2500\u2500 [1016]  customers.yaml\n\u2502       \u251c\u2500\u2500 [1.2K]  line_items.yaml\n\u2502       \u251c\u2500\u2500 [3.4K]  orders.yaml\n\u2502       \u251c\u2500\u2500 [ 732]  products.yaml\n\u2502       \u2514\u2500\u2500 [1.1K]  variants.yaml\n\u251c\u2500\u2500 [ 790]  smartsheet_templates\n\u2502   \u251c\u2500\u2500 [ 327]  dw\n\u2502   \u2502   \u251c\u2500\u2500 [ 130]  fact_line_items.sql\n\u2502   \u2502   \u2514\u2500\u2500 [  69]  fact_order.sql\n\u2502   \u2514\u2500\u2500 [ 335]  shopify\n\u2502       \u251c\u2500\u2500 [ 137]  line_items.sql\n\u2502       \u2514\u2500\u2500 [  70]  orders.sql\n\u2514\u2500\u2500 [152K]  src\n    \u251c\u2500\u2500 [ 241]  config.py\n    \u251c\u2500\u2500 [ 582]  cron_job.sh\n    \u251c\u2500\u2500 [ 57K]  make_segment_master.py\n    \u251c\u2500\u2500 [5.9K]  postgres_resource.py\n    \u251c\u2500\u2500 [ 12K]  redshift_resource.py\n    \u251c\u2500\u2500 [2.4K]  run_nightly.sh\n    \u251c\u2500\u2500 [3.3K]  s3_resource.py\n    \u251c\u2500\u2500 [4.6K]  schema.py\n    \u251c\u2500\u2500 [8.3K]  sync_bigcommerce.py\n    \u251c\u2500\u2500 [9.1K]  sync_bold.py\n    \u251c\u2500\u2500 [3.2K]  sync_dynamo.py\n    \u251c\u2500\u2500 [7.8K]  sync_google_sheets.py\n    \u251c\u2500\u2500 [7.8K]  sync_hubspot.py\n    \u251c\u2500\u2500 [4.2K]  sync_ip_locations.py\n    \u251c\u2500\u2500 [9.7K]  sync_quickbase.py\n    \u251c\u2500\u2500 [3.4K]  sync_reviewsio.py\n    \u251c\u2500\u2500 [5.1K]  sync_shopify.py\n    \u2514\u2500\u2500 [6.9K]  sync_smart_sheet.py\n\n 1.5M used in 37 directories, 270 files\n")),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Loop-baby/loop-data"},"https://github.com/Loop-baby/loop-data"))))}c.isMDXComponent=!0}}]);