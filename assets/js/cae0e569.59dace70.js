"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[55026],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),l=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=l(a),d=n,f=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return a?r.createElement(f,s(s({ref:t},c),{},{components:a})):r.createElement(f,s({ref:t},c))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var l=2;l<o;l++)s[l]=a[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},41225:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=a(87462),n=(a(67294),a(3905));const o={},s="Kafka with Docker Compose",i={unversionedId:"processing/lab-kafka-nyctaxi/assets/README",id:"processing/lab-kafka-nyctaxi/assets/README",title:"Kafka with Docker Compose",description:"- zookeeper: a centralized service for maintaining configuration info. Kafka uses it for maintaining metadata knowledge such as topic partitions, etc. Zookeeper is being phased out as a dependency, but for easier deployment we will use it in the lesson.",source:"@site/docs/03-processing/lab-kafka-nyctaxi/assets/README.md",sourceDirName:"03-processing/lab-kafka-nyctaxi/assets",slug:"/processing/lab-kafka-nyctaxi/assets/",permalink:"/docs/processing/lab-kafka-nyctaxi/assets/",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681047270,formattedLastUpdatedAt:"Apr 9, 2023",frontMatter:{}},p={},l=[{value:"AVRO Producer and Consumer",id:"avro-producer-and-consumer",level:2},{value:"Kafka Streams",id:"kafka-streams",level:2}],c={toc:l};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"kafka-with-docker-compose"},"Kafka with Docker Compose"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"zookeeper: a centralized service for maintaining configuration info. Kafka uses it for maintaining metadata knowledge such as topic partitions, etc. Zookeeper is being phased out as a dependency, but for easier deployment we will use it in the lesson."),(0,n.kt)("li",{parentName:"ul"},"broker: the main service. A plethora of environment variables are provided for easier configuration. The image for this service packages both Kafka and Confluent Server, a set of commercial components for Kafka."),(0,n.kt)("li",{parentName:"ul"},"kafka-tools: a set of additional Kafka tools provided by Confluent Community. We will make use of this service later in the lesson."),(0,n.kt)("li",{parentName:"ul"},"schema-registry: provides a serving layer for metadata. We will make use of this service later in the lesson."),(0,n.kt)("li",{parentName:"ul"},"control-center: a web-based Kafka GUI.")),(0,n.kt)("p",null,"Kafka can be entirely used with command-line tools, but the GUI helps us visualize things."),(0,n.kt)("p",null,"Start the deployment with ",(0,n.kt)("inlineCode",{parentName:"p"},"docker compose -f kafka-docker-compose.yml up"),". It may take several minutes to deploy on the first run. Check the status of the deployment with docker ps. Once the deployment is complete, access the control center GUI by browsing to localhost:9021."),(0,n.kt)("h2",{id:"avro-producer-and-consumer"},"AVRO Producer and Consumer"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# start avro production\npython producer.py\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# start avro consumption\npython consumer.py\n")),(0,n.kt)("h2",{id:"kafka-streams"},"Kafka Streams"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# start json production\npython producer_taxi_json.py\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# read the stream\npython stream.py worker\n")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"stream_count_vendor_trips.py")," is another Faust app that showcases creating a state from a stream."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# read the stateful stream\npython stream_count_vendor_trips.py worker\n")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"branch_price.py")," is a Faust app that showcases branching:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# read the batch stream\npython branch_price.py worker\n")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"windowing.py")," is a very similar app to ",(0,n.kt)("inlineCode",{parentName:"p"},"stream_count_vendor_trips.py")," but defines a tumbling window for the table."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"# read the batch stream\npython windowing.py worker\n")))}u.isMDXComponent=!0}}]);