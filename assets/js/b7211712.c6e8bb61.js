"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[22062],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>g});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),d=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=d(r),g=n,m=c["".concat(l,".").concat(g)]||c[g]||u[g]||o;return r?a.createElement(m,s(s({ref:t},p),{},{components:r})):a.createElement(m,s({ref:t},p))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var d=2;d<o;d++)s[d]=r[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},51627:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=r(87462),n=(r(67294),r(3905));const o={},s="Triggers",i={unversionedId:"foundations/language/sql/triggers",id:"foundations/language/sql/triggers",title:"Triggers",description:"Triggers\xa0are\xa0a type of stored procedure, configured to\xa0call whenever an event occurs. This trigger can be used, for example, to signalize the execution of some statements whenever new data is included in a table, or a record is edited in\xa0the table.",source:"@site/docs/01-foundations/language/sql/triggers.md",sourceDirName:"01-foundations/language/sql",slug:"/foundations/language/sql/triggers",permalink:"/docs/foundations/language/sql/triggers",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681451444,formattedLastUpdatedAt:"Apr 14, 2023",frontMatter:{},sidebar:"docs",previous:{title:"Stored Procedures",permalink:"/docs/foundations/language/sql/stored-procedures"},next:{title:"Indexes",permalink:"/docs/foundations/language/sql/indexes"}},l={},d=[],p={toc:d};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"triggers"},"Triggers"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Triggers"),"\xa0are\xa0a type of stored procedure, configured to\xa0call whenever an event occurs. This trigger can be used, for example, to signalize the execution of some statements whenever new data is included in a table, or a record is edited in\xa0the table."),(0,n.kt)("p",null,"Many\xa0",(0,n.kt)("em",{parentName:"p"},"trigger"),"\xa0use cases are about creating transaction audit tables and maintaining data consistency, by reviewing relationships before confirming any type of transaction. We can use a trigger in the data definition and for data\xa0manipulation instructions."),(0,n.kt)("p",null,"In the following, we will use the\xa0",(0,n.kt)("strong",{parentName:"p"},"DDL CREATE"),"\xa0statement, which we have already seen in this note to create tables, but now we will use it to create\xa0a\xa0",(0,n.kt)("strong",{parentName:"p"},"TRIGGER"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TRIGGER LOG_PRICE_HISTORY before update\non PRODUCTS_SERVICES\nfor each row\ninsert into PRICE_HISTORY\nvalues(old.PRODUCTID, old.BASEPRICE, old.DISCOUNT, old.FINALPRICE, old.DATELASTUPDATE);\n")),(0,n.kt)("p",null,"Executing this command, the\xa0",(0,n.kt)("strong",{parentName:"p"},"LOG_PRICE_HISTORY"),"\xa0trigger will be created and linked to the\xa0",(0,n.kt)("strong",{parentName:"p"},"PRODUCTS_SERVICES"),"\xa0table, with the following condition: whenever an item is edited in this table, a new record will be created in the\xa0",(0,n.kt)("strong",{parentName:"p"},"PRICE_HISTORY"),"\xa0table with the data from this table before\xa0the change."),(0,n.kt)("p",null,"This makes it possible for you to keep a history of this table and know exactly the changes that\xa0were made."),(0,n.kt)("p",null,"Sometimes, tables become very large, with thousands and even millions of records. This size can cause performance problems in database operations, and one of the methods used to mitigate these problems was indexes, which we are going to look\xa0at now."),(0,n.kt)("p",null,"In MySQL, a trigger is a stored program invoked automatically in response to an event such as\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-insert-statement.aspx"},"insert"),",\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-update-data.aspx"},"update"),", or\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-delete-statement.aspx"},"delete"),"\xa0that occurs in the associated table. For example, you can define a trigger that is invoked automatically before a new row is inserted into a table."),(0,n.kt)("p",null,"MySQL supports triggers that are invoked in response to the\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-insert-statement.aspx"},"INSERT"),",\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-update-data.aspx"},"UPDATE"),"\xa0or\xa0",(0,n.kt)("a",{parentName:"p",href:"https://www.mysqltutorial.org/mysql-delete-statement.aspx"},"DELETE"),"\xa0event."),(0,n.kt)("p",null,"The SQL standard defines two types of triggers: row-level triggers and statement-level triggers."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"A row-level trigger is activated for each row that is inserted, updated, or deleted.\xa0 For example, if a table has 100 rows inserted, updated, or deleted, the trigger is automatically invoked 100 times for the 100 rows affected."),(0,n.kt)("li",{parentName:"ul"},"A statement-level trigger is executed once for each transaction regardless of how many rows are inserted, updated, or deleted.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Advantages of triggers")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Triggers provide another way to check the integrity of data."),(0,n.kt)("li",{parentName:"ul"},"Triggers handle errors from the database layer."),(0,n.kt)("li",{parentName:"ul"},"Triggers give an alternative way to\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-triggers/working-mysql-scheduled-event/"},"run scheduled tasks"),". By using triggers, you don't have to wait for the\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-triggers/working-mysql-scheduled-event/"},"scheduled events"),"\xa0to run because the triggers are invoked automatically\xa0",(0,n.kt)("em",{parentName:"li"},"before"),"\xa0or\xa0",(0,n.kt)("em",{parentName:"li"},"after"),"\xa0a change is made to the data in a table."),(0,n.kt)("li",{parentName:"ul"},"Triggers can be useful for auditing the data changes in tables.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Disadvantages of triggers")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Triggers can only provide extended validations, not all validations. For simple validations, you can use the\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-not-null-constraint/"},"NOT NULL"),",\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-unique-constraint/"},"UNIQUE"),",\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-check-constraint/"},"CHECK"),"\xa0and\xa0",(0,n.kt)("a",{parentName:"li",href:"https://www.mysqltutorial.org/mysql-foreign-key/"},"FOREIGN KEY"),"\xa0constraints."),(0,n.kt)("li",{parentName:"ul"},"Triggers can be difficult to troubleshoot because they execute automatically in the database, which may not invisible to the client applications."),(0,n.kt)("li",{parentName:"ul"},"Triggers may increase the overhead of the MySQL Server.")))}u.isMDXComponent=!0}}]);