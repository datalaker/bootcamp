"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[82618],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(a),m=r,E=p["".concat(s,".").concat(m)]||p[m]||u[m]||o;return a?n.createElement(E,l(l({ref:t},d),{},{components:a})):n.createElement(E,l({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},27882:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const o={},l="Sales Datamodel",i={unversionedId:"data-modeling/lab-sales-datamodel/README",id:"data-modeling/lab-sales-datamodel/README",title:"Sales Datamodel",description:"Create dimension tables",source:"@site/docs/04-data-modeling/lab-sales-datamodel/README.md",sourceDirName:"04-data-modeling/lab-sales-datamodel",slug:"/data-modeling/lab-sales-datamodel/",permalink:"/docs/data-modeling/lab-sales-datamodel/",draft:!1,tags:[],version:"current",lastUpdatedBy:"sparsh",lastUpdatedAt:1681047270,formattedLastUpdatedAt:"Apr 9, 2023",frontMatter:{}},s={},c=[{value:"Create dimension tables",id:"create-dimension-tables",level:2},{value:"Create fact table",id:"create-fact-table",level:2},{value:"Data Ingestion",id:"data-ingestion",level:2},{value:"Query",id:"query",level:2}],d={toc:c};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"sales-datamodel"},"Sales Datamodel"),(0,r.kt)("h2",{id:"create-dimension-tables"},"Create dimension tables"),(0,r.kt)("p",null,"To begin, we will create our three dimension tables: product, customer, and store location."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE product (\n    product_id INT PRIMARY KEY,\n    product_name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE customer (\n    customer_id INT PRIMARY KEY,\n    customer_name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE store_location (\n    location_id INT PRIMARY KEY,\n    location_name VARCHAR(255) NOT NULL\n);\n")),(0,r.kt)("h2",{id:"create-fact-table"},"Create fact table"),(0,r.kt)("p",null,"Next, we will create our fact table, sales, and specify the foreign keys for the dimension tables."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE sales (\n    sale_id INT PRIMARY KEY,\n    product_id INT,\n    customer_id INT,\n    location_id INT,\n    price DECIMAL(10, 2) NOT NULL,\n    FOREIGN KEY (product_id) REFERENCES product(product_id),\n    FOREIGN KEY (customer_id) REFERENCES customer(customer_id),\n    FOREIGN KEY (location_id) REFERENCES store_location(location_id)\n);\n")),(0,r.kt)("h2",{id:"data-ingestion"},"Data Ingestion"),(0,r.kt)("p",null,"Now that our schema is set up, we can start inserting data into our tables."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO product (product_id, product_name)\nVALUES (100, 'T-Shirt'), (101, 'Jeans'), (102, 'Jacket');\n\nINSERT INTO customer (customer_id, customer_name)\nVALUES (1, 'John Doe'), (2, 'Jane Smith'), (3, 'Bob Johnson');\n\nINSERT INTO store_location (location_id, location_name)\nVALUES (1, 'New York'), (2, 'Los Angeles'), (3, 'Chicago');\n\nINSERT INTO sales (sale_id, product_id, customer_id, location_id, price)\nVALUES (1, 100, 1, 1, 10.99), (2, 101, 2, 2, 5.99), (3, 102, 3, 3, 15.99);\n")),(0,r.kt)("h2",{id:"query"},"Query"),(0,r.kt)("p",null,"With the data in place, we can now run queries to analyze the data in various ways. For example, we can find the total sales for a specific product:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT product_name, SUM(price) as total_sales\nFROM sales\nJOIN product ON sales.product_id = product.product_id\nWHERE product_name = 'Jeans'\nGROUP BY product_name;\n")),(0,r.kt)("p",null,"This query will return the total sales for the product \u201cJeans\u201d"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"product_name"),(0,r.kt)("th",{parentName:"tr",align:null},"total_sales"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Jeans"),(0,r.kt)("td",{parentName:"tr",align:null},"5.99")))),(0,r.kt)("p",null,"In this example, we used a join between the sales table and the product dimension table to retrieve the product name and then used the WHERE clause to filter by the product name and finally used the GROUP BY clause to group by product_name and sum the price."))}u.isMDXComponent=!0}}]);