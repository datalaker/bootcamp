<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-orchestration/airflow/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Airflow | Recohut Data Bootcamp</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.recohut.com/docs/orchestration/airflow"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="data science, data engineering, data analytics"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Airflow | Recohut Data Bootcamp"><meta data-rh="true" name="description" content="Apache Airflow is an open source tool for programmatically authoring, scheduling, and monitoring data pipelines. It has over 9 million downloads per month and an active OSS community. Airflow allows data practitioners to define their data pipelines as Python code in a highly extensible and infinitely scalable way."><meta data-rh="true" property="og:description" content="Apache Airflow is an open source tool for programmatically authoring, scheduling, and monitoring data pipelines. It has over 9 million downloads per month and an active OSS community. Airflow allows data practitioners to define their data pipelines as Python code in a highly extensible and infinitely scalable way."><link data-rh="true" rel="icon" href="/img/branding/favicon-black.svg"><link data-rh="true" rel="canonical" href="https://www.recohut.com/docs/orchestration/airflow"><link data-rh="true" rel="alternate" href="https://www.recohut.com/docs/orchestration/airflow" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.recohut.com/docs/orchestration/airflow" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Recohut Data Bootcamp RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Recohut Data Bootcamp Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B4S1B1ZDTT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B4S1B1ZDTT",{})</script><link rel="stylesheet" href="/assets/css/styles.e4e34528.css">
<link rel="preload" href="/assets/js/runtime~main.166317d0.js" as="script">
<link rel="preload" href="/assets/js/main.3580ce8c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/branding/favicon-color.svg" alt="Recohut Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/branding/favicon-color.svg" alt="Recohut Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Bootcamp</b></a><a class="navbar__item navbar__link" href="/docs/bootcamp">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sparsh-ai/recohut" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/bootcamp">Recohut Data Bootcamps</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/foundations/developer-foundations/install-anaconda">foundations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/storage/apache-couchdb">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/processing/apache-beam">processing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/data-modeling/3nf-data-modeling">data-modeling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/extraction">Data Extraction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Extraction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/orchestration">Orchestration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Orchestration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/docs/orchestration/airflow">Airflow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Airflow&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/github-nft">Github NFT Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-airflow-conn-py">Airflow connection using Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-airflow-email-notifications">Airflow Email Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-airflow-getting-started">Getting Started with Airflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-bike-sharing-service-pipeline">Bike Sharing Service Data Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-forex-etl">Airflow Forex ETL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-imdb-spark-etl">IMDB data procesing and Airflow pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/lab-tolldata">Creating ETL Data Pipelines using Apache Airflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/airflow/labdev-spotify">Spotify-Data-Engineering-and-Analysis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/orchestration/azure-data-factory">Azure Data Factory</a><button aria-label="Toggle the collapsible sidebar category &#x27;Azure Data Factory&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/orchestration/datafusion">Cloud Data Fusion</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cloud Data Fusion&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/orchestration/modern-data-stack">Modern Data Stack (MDS)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modern Data Stack (MDS)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/orchestration/nifi">NiFi</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/orchestration/prefect">Prefect</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prefect&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/orchestration/stepfunctions">Step Functions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Step Functions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/visualization">Visualization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Visualization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/datascience/algorithms/decision-trees">datascience</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/assignments">Assignments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Assignments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/capstones">Capstones</a><button aria-label="Toggle the collapsible sidebar category &#x27;Capstones&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/mlops">MLOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;MLOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/a1-interviewprep">Interview Preparation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Interview Preparation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/a3-casestudies">Case Studies</a><button aria-label="Toggle the collapsible sidebar category &#x27;Case Studies&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/b3-misc/explore-further">b3-misc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/mathematics">Mathematics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Mathematics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/orchestration"><span itemprop="name">Orchestration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Airflow</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Airflow</h1><p>Apache Airflow is an open source tool for programmatically authoring, scheduling, and monitoring data pipelines. It has over 9 million downloads per month and an active OSS community. Airflow allows data practitioners to define their data pipelines as Python code in a highly extensible and infinitely scalable way.</p><p>Airflow pipelines are defined as DAGs using Python code in DAG files. Each DAG file typically defines one DAG, which describes the different tasks and their dependencies. Besides this, the DAG also defines a schedule interval that determines when the DAG is executed by Airflow. One advantage of defining Airflow DAGs in Python code is that this programmatic approach provides you with a lot of flexibility for building DAGs. This flexibility gives a great deal of customization in how you build your pipelines, allowing you to fit Airflow to your needs for building arbitrarily complex pipelines. In addition to this flexibility, another advantage of Airflow’s Python foundation is that tasks can execute any operation that you can implement in Python. Over time, this has led to the development of many Airflow extensions that enable you to execute tasks across a wide variety of systems, including external databases, big data technologies, and various cloud services, allowing you to build complex data pipelines bringing together data processes across many different systems.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-start-airflow-server">How to start Airflow Server<a class="hash-link" href="#how-to-start-airflow-server" title="Direct link to heading">​</a></h3><p>Create a new folder (or use an existing one) and go to that folder. Then run this snippet. This will first set the current folder as Airflow home directory so that everything related to your Airflow project will be generated inside the current folder. Then the snippet will disable to load Airflow examples which reduces lot of clutter from GUI. It then initialize the database (SQLite) and create an admin user with <code>admin</code> as both username and password. You can change the user details if you want. Finally, it will start the Airflow service.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export AIRFLOW_HOME=$(pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AIRFLOW__CORE__LOAD_EXAMPLES=False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">airflow db init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">airflow users create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --username admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --password admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --firstname Sparsh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --lastname Agarwal \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --role Admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --email sparsh@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">airflow standalone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="history">History<a class="hash-link" href="#history" title="Direct link to heading">​</a></h3><p>Airflow started as an open source project at Airbnb. In 2015, Airbnb was growing rapidly and struggling to manage the vast quantities of internal data it generated every day. Airbnb data engineers, data scientists, and analysts had to regularly write scheduled batch jobs to automate processes. To satisfy the need for a robust scheduling tool, Maxime Beauchemin created Airflow to allow Airbnb to quickly author, iterate, and monitor batch data pipelines.</p><p>Airflow has come a long way since Maxime&#x27;s first commit. The project joined the official Apache Foundation Incubator in April of 2016, and graduated as a top-level project in January 2019. As of August 2022 Airflow has over 2,000 contributors, 16,900 commits and 26,900 stars on GitHub.</p><p>On December 17th 2020, Airflow 2.0 was released, bringing with it major upgrades and powerful new features. Airflow is used by thousands of data engineering teams around the world and adoption continues to accelerate as the community grows stronger.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-use-airflow">Why use Airflow<a class="hash-link" href="#why-use-airflow" title="Direct link to heading">​</a></h3><p>Apache Airflow is a platform for programmatically authoring, scheduling, and monitoring workflows. It is especially useful for creating and orchestrating complex data pipelines.</p><p>Data orchestration sits at the heart of any modern data stack and provides elaborate automation of data pipelines. With orchestration, actions in your data pipeline become aware of each other and your data team has a central location to monitor, edit, and troubleshoot their workflows.</p><p>Airflow provides many benefits, including:</p><ul><li>Dynamic data pipelines: In Airflow, pipelines are defined as Python code. Anything you can do in Python, you can do in Airflow.</li><li>CI/CD for data pipelines: With all the logic of your workflows defined in Python, it is possible to implement CI/CD processes for your data pipelines.</li><li>Tool agnosticism: Airflow can connect to any application in your data ecosystem that allows connections through an API.</li><li>High extensibility: For many commonly used data engineering tools, integrations exist in the form of provider packages, which are routinely extended and updated.</li><li>Infinite scalability: Given enough computing power, you can orchestrate as many processes as you need, no matter the complexity of your pipelines.</li><li>Visualization: The Airflow UI provides an immediate overview of your data pipelines.</li><li>Stable REST API: The Airflow REST API allows Airflow to interact with RESTful web services.</li><li>Ease of use: With the Airflow CLI, you can run a local Airflow environment with only three bash commands.</li><li>Active and engaged OSS community: With millions of users and thousands of contributors, Airflow is here to stay and grow.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-airflow">When to use Airflow<a class="hash-link" href="#when-to-use-airflow" title="Direct link to heading">​</a></h3><p>Airflow can be used for almost any batch data pipeline, and there are a significant number of <a href="https://soundcloud.com/the-airflow-podcast/use-cases" target="_blank" rel="noopener noreferrer">documented use cases</a> in the community. Because of its extensibility, Airflow is particularly powerful for orchestrating jobs with complex dependencies in multiple external systems.</p><p>The following diagram illustrates a complex use case that can be accomplished with Airflow. By writing pipelines in code and using Airflow providers, you can integrate with any number of different systems with just a single platform for orchestration and monitoring.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555836-55e927ab-70a3-474a-8cff-5938cca81cfe.png" class="img_ev3q"></p><p>Some common use cases of Airflow include:</p><ul><li>ETL/ELT pipelines: For example, running a write, audit, publish pattern on data in Snowflake as shown in Orchestrating Snowflake Queries with Airflow.</li><li>MLOps: For example, using Airflow with Tensorflow and MLFlow as shown in Using Airflow with Tensorflow and MLFlow.</li><li>Operationalized analytics: For example, orchestrating a pipeline to extract insights from your data and display them in dashboards as shown in Using Airflow as a Data Analyst.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-airflow-concepts">Core Airflow concepts<a class="hash-link" href="#core-airflow-concepts" title="Direct link to heading">​</a></h3><p>To navigate Airflow resources, it is helpful to have a general understanding of the following core Airflow concepts:</p><ul><li>DAG: Directed Acyclic Graph. An Airflow DAG is a workflow defined as a graph, where all dependencies between nodes are directed and nodes do not self-reference. For more information on Airflow DAGs, see Introduction to Airflow DAGs.</li><li>DAG run: The execution of a DAG at a specific point in time. A DAG run can be scheduled or manually triggered.</li><li>Task: A step in a DAG describing a single unit of work.</li><li>Task instance: The execution of a task at a specific point in time.</li></ul><p>When authoring DAGs, you use operators. An operator is an abstraction over Python code designed to perform a specific action and takes the form of a function that accepts parameters. Each operator in your DAG code corresponds to one Airflow task.</p><p>The following are the primary operator categories:</p><ul><li>Action operators: Execute a function. For example, the PythonOperator or the BashOperator.</li><li>Transfer operators: Move data from a source to a destination. For example, the S3ToRedshiftOperator.</li><li>Sensors: Wait for something to happen. For example, the ExternalTaskSensor or the HttpSensorAsync.</li></ul><p>While operators are defined individually, they can pass information to each other by using XComs.</p><p>Some commonly used action operators such as the PythonOperator are part of core Airflow and are automatically installed in your Airflow instance. Operators used to interact with external systems are maintained separately to Airflow in provider packages.</p><p>Providers are packages that are maintained by the community and include all of the core operators, hooks, and sensors for a given service, for example:</p><ul><li>Amazon provider</li><li>Snowflake provider</li><li>Google provider</li><li>Azure provider</li><li>Databricks provider</li><li>Fivetran provider</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-components">Airflow components<a class="hash-link" href="#airflow-components" title="Direct link to heading">​</a></h3><p>When working with Airflow, it is important to understand the underlying components of its infrastructure. Knowing which components are available and their purpose can help you develop your DAGs, troubleshoot issues, and run Airflow successfully.</p><p>The following Airflow components must be running at all times:</p><ul><li>Webserver: A Flask server running with Gunicorn that serves the Airflow UI.</li><li>Scheduler: A Daemon responsible for scheduling jobs. This is a multi-threaded Python process that determines what tasks need to be run, when they need to be run, and where they are run.</li><li>Database: A database where all DAG and task metadata are stored. This is typically a Postgres database, but MySQL, MsSQL, and SQLite are also supported.</li><li>Executor: The mechanism that defines how the available computing resources are used to execute tasks. An executor is running within the scheduler whenever Airflow is up.</li></ul><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555851-cd8df96d-5e0e-443d-a9cb-5a6d4c389ad4.png" class="img_ev3q"></p><p>Additionally, you may also have the following situational components:</p><ul><li>Triggerer: A separate process which supports deferrable operators. This component is optional and must be run separately.</li><li>Worker: The process that executes tasks, as defined by the executor. Depending on which executor you choose, you may or may not have workers as part of your Airflow infrastructure.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dags">DAGs<a class="hash-link" href="#dags" title="Direct link to heading">​</a></h3><blockquote><p>In Airflow, data pipelines are defined in Python code as directed acyclic graphs, also known as DAGs. Within a graph, each node represents a task which completes a unit of work, and each edge represents a dependency between tasks.</p></blockquote><p>In Airflow, a directed acyclic graph (DAG) is a data pipeline defined in Python code. Each DAG represents a collection of tasks you want to run and is organized to show relationships between tasks in the Airflow UI. The mathematical properties of DAGs make them useful for building data pipelines:</p><ul><li>Directed: If multiple tasks exist, then each task must have at least one defined upstream or downstream task.</li><li>Acyclic: Tasks cannot have a dependency to themselves. This avoids infinite loops.</li><li>Graph: All tasks can be visualized in a graph structure, with relationships between tasks defined by nodes and vertices.</li></ul><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555857-871efc87-cfcb-46ec-8b25-d4242cb7a617.png" class="img_ev3q"></p><p>Aside from these requirements, DAGs in Airflow can be defined however you need! They can have a single task or thousands of tasks arranged in any number of ways.</p><p>An instance of a DAG running on a specific date is called a DAG run. DAG runs can be started by the Airflow scheduler based on the DAG&#x27;s defined schedule, or they can be started manually.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-airflow-ui">The Airflow UI<a class="hash-link" href="#the-airflow-ui" title="Direct link to heading">​</a></h3><p>The DAGs view is the landing page when you sign in to Airflow. It shows a list of all your DAGs, the status of recent DAG runs and tasks, the time of the last DAG run, and basic metadata about the DAG like the owner and the schedule.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555886-96ea3a30-978e-4e78-8321-8658f4410a22.png" class="img_ev3q"></p><p>In the DAGs view you can:</p><ul><li>Pause/unpause a DAG with the toggle to the left of the DAG name.</li><li>Filter the list of DAGs to show active, paused, or all DAGs.</li><li>Trigger, refresh, or delete a DAG with the buttons in the Actions section.</li><li>Navigate quickly to other DAG-specific pages from the Links section.</li></ul><p>The Graph view shows a visualization of the tasks and dependencies in your DAG and their current status for a specific DAG run. This view is particularly useful when reviewing and developing a DAG. When running the DAG, toggle Auto-refresh to see the status of the tasks update in real time.</p><p>Specifically, the additional views available are:</p><ul><li>Task Instance Details: Shows the fully rendered task - an exact summary of what the task does (attributes, values, templates, etc.).</li><li>Rendered Template: Shows the task&#x27;s metadata after it has been templated.</li><li>Log: Shows the logs of that particular TaskInstance.</li><li>XCom: Shows XComs created by that particular TaskInstance.</li><li>List Instances, all runs: Shows a historical view of task instances and statuses for that particular task.</li><li>Filter Upstream: Updates the Graph View to show only the task selected and any upstream tasks.</li></ul><p>The actions available for the task instance are:</p><ul><li>Run: Manually runs a specific task in the DAG. You have the ability to ignore dependencies and the current task state when you do this.</li><li>Clear: Removes that task instance from the metadata database. This is one way of manually re-running a task (and any downstream tasks, if you choose). You can choose to also clear upstream or downstream tasks in the same DAG, or past or future task instances of that task.</li><li>Mark Failed: Changes the task&#x27;s status to failed. This will update the metadata database and stop downstream tasks from running if that is how you have defined dependencies in your DAG. You have additional capabilities for marking past and future task instances as failed and for marking upstream or downstream tasks as failed at the same time.</li><li>Mark Success: Changes the task&#x27;s status to success. This will update the metadata database and allow downstream tasks to run if that is how you have defined dependencies in your DAG. You have additional capabilities for marking past and future task instances as successful and for marking upstream or downstream tasks as successful at the same time.</li></ul><p>The Grid view was introduced in Airflow 2.3 and shows a grid representation of the DAG&#x27;s previous runs, including their duration and the outcome of all individual task instances. Each column represents a DAG run and each square represents a task instance in that DAG run. Task instances are color-coded according to their status. A small play icon on a DAG run indicates that a run was triggered manually, and a small dataset icon shows that a run was triggered via a dataset update.</p><p>Click a square in the grid to view more details about the task instance and access links to additional views and actions.</p><p>The Calendar view is available in Airflow 2.1 and later. It shows the state of DAG runs overlaid on a calendar. States are represented by color. If there were multiple DAG runs on the same day with different states, the color is a gradient between green (success) and red (failure).</p><p>The Code view shows the code that is used to generate the DAG. While your code should live in source control, the Code view provides a quick insight into what is going on in the DAG. DAG code can&#x27;t be edited in the UI.</p><p>This view shows code only from the file that generated the DAG. It does not show any code that may be imported in the DAG, such as custom hooks or operators or code in your /include directory.</p><p>The following are the additional DAG views that are available, but not discussed in this guide:</p><ul><li>Task Duration: Shows a line graph of the duration of each task over time.</li><li>Task Tries: Shows a line graph of the number of tries for each task in a DAG run over time.</li><li>Landing Times: Shows a line graph of the time of day each task started over time.</li><li>Gantt: Shows a Gantt chart with the duration of each task for the chosen DAG run.</li><li>Details: Shows details of the DAG configuration and DagModel debug information.</li><li>Audit Log: Shows selected events for all DAG runs.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-scheduling-and-timetables">Airflow scheduling and timetables<a class="hash-link" href="#airflow-scheduling-and-timetables" title="Direct link to heading">​</a></h2><p>One of the fundamental features of Apache Airflow is the ability to schedule jobs. Historically, Airflow users scheduled their DAGs by specifying a schedule with a cron expression, a timedelta object, or a preset Airflow schedule. Timetables, released in Airflow 2.2, allow users to create their own custom schedules using Python, effectively eliminating the limitations of cron. With timetables, you can now schedule DAGs to run at any time. Datasets, introduced in Airflow 2.4, let you schedule your DAGs on updates to a dataset rather than a time-based schedule.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555864-ea51b7e7-7a1d-4074-93ff-9cbb72810b84.png" class="img_ev3q"></p><p>The following parameters ensure your DAGs run at the correct time:</p><ul><li>data_interval_start: Defines the start date and time of the data interval. A DAG&#x27;s timetable will return this parameter for each DAG run. This parameter is created automatically by Airflow, or is specified by the user when implementing a custom timetable.</li><li>data_interval_end: Defines the end date and time of the data interval. A DAG&#x27;s timetable will return this parameter for each DAG run. This parameter is created automatically by Airflow, or is specified by the user when implementing a custom timetable.</li><li>schedule: Defines when a DAG will be run. This value is set at the DAG configuration level. It accepts cron expressions, timedelta objects, timetables, and lists of datasets.</li><li>start_date: The first date your DAG will be executed. This parameter is required for your DAG to be scheduled by Airflow.</li><li>end_date: The last date your DAG will be executed. This parameter is optional.</li></ul><p><strong>Defining scheduling intervals</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DAG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;03_with_end_date&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schedule_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@daily&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">year</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2019</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> month</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> day</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end_date</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">year</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2019</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> month</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> day</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will result in the full set of schedule intervals:</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/62965911/214555874-3d002bff-0e75-4b3a-8857-87505cc4a0fd.png" class="img_ev3q"></p><p><strong>Cron-based intervals</strong></p><p>To support more complicated scheduling intervals, Airflow allows us to define scheduling intervals using the same syntax as used by cron, a time-based job scheduler used by Unix-like computer operating systems such as macOS and Linux. This syntax consists of five components and is defined as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ┌─────── minute (0 - 59)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># │ ┌────── hour (0 - 23)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># │ │ ┌───── day of the month (1 - 31)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># │ │ │ ┌───── month (1 - 12)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># │ │ │ │ ┌──── day of the week (0 - 6) (Sunday to Saturday;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># │ │ │ │ │      7 is also Sunday on some systems)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># * * * * *</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Although this cron-based representation may seem a bit convoluted, it provides us with considerable flexibility for defining time intervals:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 * * * * = hourly (running on the hour)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 * * * = daily (running at midnight)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 * * 0 = weekly (running at midnight on Sunday)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 1 * * = midnight on the first of every month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">45 23 * * SAT = 23:45 every Saturday</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 * * MON,WED,FRI = run every Monday, Wednesday, Friday at midnight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 * * MON-FRI = run every weekday at midnight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0,12 * * * = run every day at 00:00 and 12:00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Airflow also provides support for several macros that represent shorthand for commonly used scheduling intervals:</p><table><thead><tr><th>@once</th><th>Schedule once and only once.</th></tr></thead><tbody><tr><td>@hourly</td><td>Run once an hour at the beginning of the hour.</td></tr><tr><td>@daily</td><td>Run once a day at midnight.</td></tr><tr><td>@weekly</td><td>Run once a week at midnight on Sunday morning.</td></tr><tr><td>@monthly</td><td>Run once a month at midnight on the first day of the month.</td></tr><tr><td>@yearly</td><td>Run once a year at midnight on January 1.</td></tr></tbody></table><p><strong>Frequency-based intervals</strong></p><p>An important limitation of cron expressions is that they are unable to represent certain frequency-based schedules. For example, how would you define a cron expression that runs a DAG once every three days? It turns out that you could write an expression that runs on every first, fourth, seventh, and so on day of the month, but this approach would run into problems at the end of the month as the DAG would run consecutively on both the 31st and the first of the next month, violating the desired schedule.</p><p>This limitation of cron stems from the nature of cron expressions, as they define a pattern that is continuously matched against the current time to determine whether a job should be executed. This has the advantage of making the expressions stateless, meaning that you don’t have to remember when a previous job was run to calculate the next interval. However, as you can see, this comes at the price of some expressiveness.</p><p>What if we really want to run our DAG once every three days? To support this type of frequency-based schedule, Airflow also allows you to define scheduling intervals in terms of a relative time interval. To use such a frequency-based schedule, you can pass a <code>timedelta</code> instance (from the datetime module in the standard library) as a schedule interval.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DAG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;04_time_delta&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schedule_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timedelta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">days</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">year</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2019</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> month</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> day</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end_date</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">year</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2019</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> month</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> day</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This would result in our DAG being run every three days following the start date (on the 4th, 7th, 10th, and so on of January 2019). Of course, you can also use this approach to run your DAG every 10 minutes (using <code>timedelta(minutes=10)</code>) or every two hours (using <code>timedelta(hours=2)</code>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-airflow-backfilling-rerun-and-catchup">Understanding Airflow backfilling, rerun, and catchup<a class="hash-link" href="#understanding-airflow-backfilling-rerun-and-catchup" title="Direct link to heading">​</a></h2><p>In a data pipeline, we often need to handle data from the past. This is a very common scenario in data engineering. Most of the time, applications as the data sources are created before a data lake or data warehouse, so we need to load data from the past. There are three main terms related to this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backfill">Backfill<a class="hash-link" href="#backfill" title="Direct link to heading">​</a></h3><p>The first one is <strong>backfilling</strong>. Backfilling happens when you need to load data from the past.</p><p>Backfilling lets you use a DAG to process data prior to the DAG&#x27;s start date. Backfilling is the concept of running a DAG for a specified historical period. Unlike catchup, which triggers missed DAG runs from the DAG&#x27;s start_date through the current data interval, backfill periods can be specified explicitly and can include periods prior to the DAG&#x27;s start_date.</p><p>Backfilling can be accomplished in Airflow using the CLI by specifying the DAG ID and the start and end dates for the backfill period. This command runs the DAG for all intervals between the start date and end date. DAGs in your backfill interval are still rerun even if they already have DAG runs.</p><p>For illustration, imagine in a real-life scenario you already run a data pipeline for <em>7 days</em> starting from <strong>2021-01-01</strong>, without any issue. For some reason, your end user asked you to also load data from <strong>2020-12-01</strong>. This is a backfilling scenario. In this case, you need to load the historical data without changing or disturbing your running data pipeline.</p><p>In Airflow, you can run backfilling using the command, like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">airflow dags backfill </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-h</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c CONF</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--delay-on-limit DELAY_ON_LIMIT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-e END_DATE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-I</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-l</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-m</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--pool POOL</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--rerun-failed-tasks</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--reset-dagruns</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-B</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-s START_DATE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-S SUBDIR</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-t TASK_REGEX</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      dag_id</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, <code>airflow dags backfill -s 2021-11-01 -e 2021-11-02 example_dag</code> backfills <code>example_dag</code> from November 1st-2nd 2021.</p><p>When using backfill keep the following considerations in mind:</p><ul><li>Consider your available resources. If your backfill will trigger many DAG runs, you might want to add some of the catchup parameters to your DAG.</li><li>Clearing the task or DAG status of a backfilled DAG run does not rerun the task or DAG.</li></ul><p>Alternatively, you can deploy a copy of the DAG with a new name and a start date that is the date you want to backfill to. Airflow will consider this a separate DAG so you won&#x27;t see all the DAG runs and task instances in the same place, but it would accomplish running the DAG for data in the desired time period. If you have a small number of DAG runs to backfill, you can trigger them manually from the Airflow UI and choose the desired logical date.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rerun">Rerun<a class="hash-link" href="#rerun" title="Direct link to heading">​</a></h3><p>The second one is a <strong>rerun</strong>. A rerun happens when you need to reload data from the past. The difference between a rerun and a backfill is that a rerun works for a DAG or tasks that have run before. The scenario of using a rerun is when a DAG or tasks have failed, so you need to rerun them.</p><p>You can trigger a rerun from the Airflow web UI. In the web UI, if you click <strong>Clear</strong> in either the DAG or task indicator (in the DAG <strong>Tree View</strong>), the DAG or task will retry, and that&#x27;s what we call a rerun.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="catchup">Catchup<a class="hash-link" href="#catchup" title="Direct link to heading">​</a></h3><p>The third one is a <strong>catchup</strong>. A catchup happens when you deploy a DAG for the first time. A catchup is a process when Airflow automatically triggers multiple DAG Runs to load all expected date data. It&#x27;s similar to a backfill, but the trigger happens automatically as intended.</p><p>These three Airflow features are very important and highly relevant to real-world scenarios. Whether you are in the development phase or in production mode, you will use these features.</p><p>You can use the built-in catchup DAG argument to process data starting a year ago.</p><p>When the catchup parameter for a DAG is set to True, at the time the DAG is turned on in Airflow the scheduler starts a DAG run for every data interval that has not been run between the DAG&#x27;s start_date and the current data interval. For example, if your DAG is scheduled to run daily and has a start_date of 1/1/2021, and you deploy that DAG and turn it on 2/1/2021, Airflow will schedule and start all of the daily DAG runs for January. Catchup is also triggered when you turn a DAG off for a period and then turn it on again.</p><p>Catchup can be controlled by setting the parameter in your DAG&#x27;s arguments. By default, catchup is set to True. This example DAG doesn&#x27;t use catchup:</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> DAG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;example_dag&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2021</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_active_runs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timetable</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">UnevenIntervalsTimetable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_args</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;retries&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;retry_delay&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> timedelta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minutes</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catchup</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> dag</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Catchup is a powerful feature, but it should be used with caution. For example, if you deploy a DAG that runs every 5 minutes with a start date of 1 year ago and don&#x27;t set catchup to False, Airflow will schedule numerous DAG runs all at once. When using catchup, keep in mind what resources Airflow has available and how many DAG runs you can support at one time. To avoid overloading your scheduler or external systems, you can use the following parameters in conjunction with catchup:</p><ul><li>max_active_runs: Set at the DAG level and limits the number of DAG runs that Airflow will execute for that particular DAG at any given time. For example, if you set this value to 3 and the DAG had 15 catchup runs to complete, they would be executed in 5 chunks of 3 runs.</li><li>depends_on_past: Set at the task level or as a default_arg for all tasks at the DAG level. When set to True, the task instance must wait for the same task in the most recent DAG run to be successful. This ensures sequential data loads and allows only one DAG run to be executed at a time in most cases.</li><li>wait_for_downstream: Set at the DAG level and similar to a DAG-level implementation of depends_on_past. The entire DAG needs to run successfully for the next DAG run to start.</li><li>catchup_by_default: Set at the Airflow level in your airflow.cfg or as an environment variable. If you set this parameter to False all DAGs in your Airflow environment will not catchup unless you turn it on.</li></ul><p>TIP</p><blockquote><p>If you want to deploy your DAG with catchup enabled but there are some tasks you don&#x27;t want to run during the catchup, you can use the LatestOnlyOperator in your DAG. This operator only runs during the DAG&#x27;s most recent scheduled interval. In every other DAG run it is ignored, along with any tasks downstream of it.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-sensors">Airflow Sensors<a class="hash-link" href="#airflow-sensors" title="Direct link to heading">​</a></h2><p>First, let&#x27;s understand what late data is and why it&#x27;s an issue for scheduling.</p><p>Imagine you have two DAGs. The first DAG loads data from GCS to a BigQuery raw table, as follows:</p><p><code>GCS → BigQuery raw table → BigQuery DWH tables</code></p><p>The second DAG will load data from the BigQuery raw table to a data mart table, as follows:</p><p><code>BigQuery DWH tables → BigQuery data mart</code></p><p>Here are the two scenarios:</p><ul><li>The data sources from GCS are ready at 5:00 A.M.</li><li>The requirement is to have a data mart table ready by 6:00 A.M.</li></ul><p>What can go wrong in this scenario? To answer that, let&#x27;s do some pseudocode to handle the requirements, as follows:</p><ol><li><p>The data is ready by 5:00 A.M. For a time buffer, let&#x27;s add 10 minutes, which means that we can create a scheduler that runs at 5:10 A.M. every day for the first DAG. In our DAG, we can define the following:</p><p><code>schedule_interval = 10 5 * * *</code></p></li><li><p>The second DAG is dependent on the first DAG. Let&#x27;s assume the first DAG will be finished after 30 minutes or at 5:40 A.M. For a time buffer, let&#x27;s add 5 minutes on top of that. Then, we can create a scheduler that runs at 5:45 A.M. every day for the second DAG. In our second DAG, we can define the following:</p><p><code>schedule_interval = 45 5 * * *</code></p></li></ol><p>Sounds good? Yes---it will be good for most cases, assuming that the first DAG will be finished in less than 35 minutes.</p><p>Now, imagine what will happen if the first DAG is 10 minutes late, or---in other words---the first DAG finished in 45 minutes rather than 30 minutes.</p><p>If the first DAG finished late, then the second DAG will start blindly. <em>Blindly</em> means that the DAG will run without knowing that the upstream data is not actually there yet, and that is very bad.</p><p>In a real-world scenario, DAG dependencies are everywhere---there can be tens to hundreds (or even more) DAG dependencies in a day. If one DAG is late, imagine the implications on all the downstream DAGs. All your daily data will be corrupted just because some DAGs are late by a couple of minutes. How should we avoid that? The answer is by using Airflow sensors.</p><p>Airflow came up with a feature called a sensor. A sensor is a mechanism to check some conditions before starting a DAG Run. If the object doesn&#x27;t exist in the directory, the operator will wait. It will wait and keep checking every 60 seconds, and that&#x27;s what you set in the <strong>poke_interval</strong> parameter. If you think about it, it will be very useful for our DAG dependencies, in that the downstream DAG can wait before it runs the other tasks.</p><p>Let&#x27;s get back to our scenario and improve our pseudocode, as follows:</p><ol><li><p>The data is ready by 5:00 A.M. We can create a scheduler that runs at 5:00 A.M. every day for the first DAG without any time buffer. In our DAG, we can define the following:</p><p><code>schedule_interval = 0 5 * * *</code></p></li><li><p>For the second DAG, let&#x27;s no longer assume anything from the first DAG. We don&#x27;t assume how long the first DAG will take to finish. The first DAG can finish in 1 minute, 5 minutes, or 1 hour---we don&#x27;t need to assume. Rather, we will start the schedule at the same time as the first DAG, which is 5:00 A.M., and what we will do is to put a sensor on the signal directory from the first DAG. So, the logic will look like this:</p><p><code>schedule_interval = 0 5 * * *</code></p></li></ol><p>And that&#x27;s it---with the new logic, the first DAG will send a signal file into a directory and later, the downstream DAGs can use this signal to automatically start or wait for the DAG to run.</p><p>In summary, you will need Airflow sensors for better DAG dependencies compared to relying on a fixed schedule time. The Airflow sensor has a poking mechanism that checks the availability of some conditions - for example, checking the existence of a file.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="import-custom-hooks-and-operators">Import custom hooks and operators<a class="hash-link" href="#import-custom-hooks-and-operators" title="Direct link to heading">​</a></h2><p>One of the great benefits of Airflow is its vast network of provider packages that provide hooks, operators, and sensors for many common use cases. Another great benefit of Airflow is that it is highly customizable because everything is defined in Python code. If a hook, operator, or sensor you need doesn&#x27;t exist in the open source, you can easily define your own.</p><p>At a high level, creating a custom operator is straightforward. At a minimum, all custom operators must:</p><ul><li>Inherit from the BaseOperator.</li><li>Define Constructor and Execute classes.</li></ul><p>The code appears similar to the following:</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">baseoperator </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BaseOperator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decorators </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> apply_defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> hooks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_hook </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MyHook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyOperator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BaseOperator</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@apply_defaults</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 my_field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyOperator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_field </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> my_field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MyHook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_conn&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_method</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If your custom operator is modifying functionality of an existing operator, your class can inherit from the operator you are building on instead of the BaseOperator.</p><p>After you&#x27;ve defined your custom operator, you need to make it available to your DAGs. Some legacy Airflow documentation or forums may reference registering your custom operator as an Airflow plugin, but this is not necessary. To import a custom operator into your DAGs, the file containing your custom operator needs to be in a directory that is present in your PYTHONPATH.</p><p>By default, Airflow adds the dags/ and plugins/ directories in a project to the PYTHONPATH, so those are the most natural choices for storing custom operator files (check out the Apache Airflow Module Management docs for more info). Your project structure may vary depending on your team and your use case. Astronomer uses the following structure, where custom operator files live in the plugins/ directory with sub-folders for readability.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── dags/  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── example-dag.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Dockerfile  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── include/   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── sql/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── transforms.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── packages.txt   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── plugins/   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── operators/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── my_operator.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── sensors/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── my_sensor.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── requirements.txt  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After you&#x27;ve added your custom operators to the project, you can import them into your DAG like you would any other Python package:</p><div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DAG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> datetime </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timedelta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> operators</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_operator </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MyOperator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sensors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_sensor </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_args </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;owner&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;airflow&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;depends_on_past&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;start_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2018</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;email_on_failure&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;email_on_retry&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;retries&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;retry_delay&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> timedelta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minutes</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> DAG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;example_dag&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         max_active_runs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         schedule_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@once&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         default_args</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">default_args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> dag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sens </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MySensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        task_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;taskA&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    op </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MyOperator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        task_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;taskB&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        my_field</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;some text&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sens </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> op</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And that&#x27;s it! Your DAG will use MyOperator and MySensor when it runs, giving you full flexibility over what happens in your pipelines.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-on-cloud">Airflow on Cloud<a class="hash-link" href="#airflow-on-cloud" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-composer">Cloud Composer<a class="hash-link" href="#cloud-composer" title="Direct link to heading">​</a></h3><p>Cloud Composer is an Airflow-managed service in GCP. Using Cloud Composer, we don&#x27;t need to think about the infrastructure, installation, and software management for the Airflow environment. With this, we can focus only on the development and deployment of our data pipeline. From the perspective of a data engineer, there is almost no difference between Cloud Composer and Airflow.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="side-hustles">Side hustles<a class="hash-link" href="#side-hustles" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-db">Airflow db<a class="hash-link" href="#airflow-db" title="Direct link to heading">​</a></h3><p>Explore the Airflow db (in SQLite by default) in your database client line <code>DBeaver</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="encryption">Encryption<a class="hash-link" href="#encryption" title="Direct link to heading">​</a></h3><p>Instead of storing credentials in plain text, you can use encryption.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="makefile">Makefile<a class="hash-link" href="#makefile" title="Direct link to heading">​</a></h2><div class="language-Makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Makefile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">install:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export AIRFLOW_HOME=$(pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export AIRFLOW_PLUGINS=$(pwd)/airflow/plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export AIRFLOW__CORE__LOAD_EXAMPLES=False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export AIRFLOW__CORE__ENABLE_XCOM_PICKLING=True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow db init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow users create \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --username admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --password admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --firstname Sparsh \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --lastname Agarwal \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --role Admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --email sparsh@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_variable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow variables set &#x27;key&#x27; &#x27;value&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow standalone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start_webserver:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow webserver -p 8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start_scheduler:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">list:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow dags list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow db reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow db init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Note: this script is a bit of a &quot;hack&quot; to run Airflow in a single container.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This is obviously not ideal, but convenient for demonstration purposes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># In a production setting, run Airflow in separate containers, as explained in Chapter 10.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    set -x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SCRIPT_DIR=$(cd &quot;$( dirname &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&amp; pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker run \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -ti \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p 8080:8080 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v ${SCRIPT_DIR}/../dags/download_rocket_launches.py:/opt/airflow/dags/download_rocket_launches.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --name airflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --entrypoint=/bin/bash \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apache/airflow:2.0.0-python3.8 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -c &#x27;( \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow db init &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow users create --username admin --password admin --firstname Anonymous --lastname Admin --role Admin --email admin@example.org \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ); \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow webserver &amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    airflow scheduler \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="labs">Labs<a class="hash-link" href="#labs" title="Direct link to heading">​</a></h2><ol><li><a href="/docs/orchestration/06-orchestration/airflow/lab-airflow-getting-started">Getting started with Airflow</a><ol><li>Install Airflow in local system</li><li>Starting Airflow Web server and Scheduler</li><li>Building a BASH commands execution pipeline in Airflow</li><li>Building a CSV to JSON pipeline in Airflow</li></ol></li><li><a href="/docs/orchestration/06-orchestration/airflow/lab-airflow-email-notifications">Integrate email notifications in Airflow with AWS SNS/SES service</a></li><li><a href="/docs/orchestration/02-storage/lab-gcp-bigquery-composer">Copying BigQuery Tables Across Different Locations using Cloud Composer</a></li><li><a href="/docs/orchestration/06-orchestration/airflow/lab-bike-sharing-service-pipeline">Bike Sharing Service Data Pipeline using Cloud Composer</a></li><li><a href="/docs/orchestration/06-orchestration/airflow/lab-forex-etl">Forex ETL with Airflow</a></li><li><a href="/docs/orchestration/06-orchestration/airflow/github-nft">Building an Airflow ETL pipeline to pull NFT data from Github and store in SQLite database</a></li><li><a href="/docs/orchestration/06-orchestration/airflow/lab-imdb-spark-etl">IMDB Spark ETL</a><ol><li>Build a data pipeline that download data</li><li>Process it</li><li>Calculate the hight profit movies</li><li>Save the processed data into Postgres database</li></ol></li><li>Assignment - Build ETL Pipeline in Airflow using Toll data [<a href="/docs/orchestration/06-orchestration/airflow/lab-tolldata">source code</a>]</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="explore-further">Explore further<a class="hash-link" href="#explore-further" title="Direct link to heading">​</a></h2><ol start="3"><li><a href="https://youtu.be/eum5CxOUnEU" target="_blank" rel="noopener noreferrer">Intro To Data Orchestration With Airflow</a></li><li><a href="https://youtu.be/1UjZdmvIkZ0" target="_blank" rel="noopener noreferrer">Operating data pipeline using Airflow @ Slack</a></li><li><a href="https://eng.lyft.com/running-apache-airflow-at-lyft-6e53bb8fccff" target="_blank" rel="noopener noreferrer">Running Apache Airflow At Lyft</a></li><li><a href="https://medium.com/jellysmacklabs/how-jellysmack-pushed-data-science-jobs-orchestration-to-a-production-ready-level-e92dc4786413" target="_blank" rel="noopener noreferrer">How Jellysmack Pushed Data Science Jobs Orchestration to a Production-ready Level</a></li><li><a href="https://medium.com/groupon-eng/managing-billions-of-data-points-evolution-of-workflow-management-at-groupon-dab000a3440d" target="_blank" rel="noopener noreferrer">Managing Billions of Data Points: Evolution of Workflow Management at Groupon using Airflow</a></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-04-09T13:34:30.000Z">Apr 9, 2023</time></b> by <b>sparsh</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/orchestration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Orchestration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/orchestration/airflow/github-nft"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Github NFT Pipeline</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-start-airflow-server" class="table-of-contents__link toc-highlight">How to start Airflow Server</a></li><li><a href="#history" class="table-of-contents__link toc-highlight">History</a></li><li><a href="#why-use-airflow" class="table-of-contents__link toc-highlight">Why use Airflow</a></li><li><a href="#when-to-use-airflow" class="table-of-contents__link toc-highlight">When to use Airflow</a></li><li><a href="#core-airflow-concepts" class="table-of-contents__link toc-highlight">Core Airflow concepts</a></li><li><a href="#airflow-components" class="table-of-contents__link toc-highlight">Airflow components</a></li><li><a href="#dags" class="table-of-contents__link toc-highlight">DAGs</a></li><li><a href="#the-airflow-ui" class="table-of-contents__link toc-highlight">The Airflow UI</a></li><li><a href="#airflow-scheduling-and-timetables" class="table-of-contents__link toc-highlight">Airflow scheduling and timetables</a></li><li><a href="#understanding-airflow-backfilling-rerun-and-catchup" class="table-of-contents__link toc-highlight">Understanding Airflow backfilling, rerun, and catchup</a><ul><li><a href="#backfill" class="table-of-contents__link toc-highlight">Backfill</a></li><li><a href="#rerun" class="table-of-contents__link toc-highlight">Rerun</a></li><li><a href="#catchup" class="table-of-contents__link toc-highlight">Catchup</a></li></ul></li><li><a href="#airflow-sensors" class="table-of-contents__link toc-highlight">Airflow Sensors</a></li><li><a href="#import-custom-hooks-and-operators" class="table-of-contents__link toc-highlight">Import custom hooks and operators</a></li><li><a href="#airflow-on-cloud" class="table-of-contents__link toc-highlight">Airflow on Cloud</a><ul><li><a href="#cloud-composer" class="table-of-contents__link toc-highlight">Cloud Composer</a></li></ul></li><li><a href="#side-hustles" class="table-of-contents__link toc-highlight">Side hustles</a><ul><li><a href="#airflow-db" class="table-of-contents__link toc-highlight">Airflow db</a></li><li><a href="#encryption" class="table-of-contents__link toc-highlight">Encryption</a></li></ul></li><li><a href="#makefile" class="table-of-contents__link toc-highlight">Makefile</a></li><li><a href="#labs" class="table-of-contents__link toc-highlight">Labs</a></li><li><a href="#explore-further" class="table-of-contents__link toc-highlight">Explore further</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Bootcamp. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.166317d0.js"></script>
<script src="/assets/js/main.3580ce8c.js"></script>
</body>
</html>